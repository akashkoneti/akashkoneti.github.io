<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Proteomic Data Exploration Suite</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    :root{
      --brand-1: #0f4c81; /* deep blue */
      --brand-2: #1e90ff; /* sky blue */
      --accent: #0fb4a3; /* teal accent */
      --muted: #6c757d;
    }
    body{font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background: #f6f9fc; color: #123;}
    .hero{
      background: linear-gradient(90deg, rgba(15,76,129,0.95) 0%, rgba(30,144,255,0.85) 100%);
      color: white; padding: 3.5rem 1rem; border-bottom-left-radius: 16px; border-bottom-right-radius: 16px;
    }
    .brand-title{font-weight:700; letter-spacing:0.2px}
    .nav-tabs .nav-link{color: var(--brand-1);}
    .nav-tabs .nav-link.active{background: linear-gradient(90deg,var(--brand-1),var(--brand-2)); color: #fff; border: none;}
    .card-ghost{background: linear-gradient(180deg, #fff, #fbfdff); border: 1px solid rgba(12,41,66,0.06); box-shadow: 0 6px 20px rgba(12,41,66,0.03);}

    /* Collapsible / animation helpers */
    .fade-slide-enter{opacity:0; transform: translateY(8px); transition: all 400ms cubic-bezier(.2,.8,.2,1);} 
    .fade-slide-enter.active{opacity:1; transform:none}

    /* heatmap grid */
    .heatmap-grid{display:grid; grid-template-columns: repeat(12, 1fr); gap:4px;}
    .heat-cell{width:100%; padding-top:100%; position:relative; border-radius:3px;}
    .heat-cell > span{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:10px; color:rgba(0,0,0,0.6)}

    /* responsive iframe */
    .iframe-wrapper{position:relative; padding-bottom:56.25%; height:0; overflow:hidden;}
    .iframe-wrapper iframe{position:absolute; top:0; left:0; width:100%; height:100%; border-radius:8px; border:1px solid rgba(0,0,0,0.08)}

    footer{padding:2rem 0; color:var(--muted)}

    @media (max-width:767px){
      .hero{padding:2rem 1rem}
    }
  </style>
</head>
<body>

  <header class="hero">
    <div class="container">
      <div class="d-flex justify-content-between align-items-start gap-3 flex-column flex-md-row">
        <div>
          <h1 class="brand-title h2 mb-1">Proteomic Data Exploration Suite</h1>
          <p class="mb-2">Interactive, reproducible proteomics visualizations and lightweight analysis tools — built with R &amp; Shiny.</p>
          <div class="d-flex gap-2">
            <a class="btn btn-light btn-sm" href="#features">Explore features</a>
            <a class="btn btn-outline-light btn-sm" href="#demo">Open demo iframe</a>
          </div>
        </div>
        <div class="text-end d-none d-md-block">
          <img src="https://via.placeholder.com/180x80?text=Logo" alt="logo" style="border-radius:8px; border:1px solid rgba(255,255,255,0.12)">
          <p class="mb-0 mt-2" style="font-size:13px; opacity:0.95">v1.0 • Sample demo</p>
        </div>
      </div>
    </div>
  </header>

  <main class="container my-5">
    <div class="row gy-4">
      <div class="col-lg-8">
        <!-- Tabs -->
        <ul class="nav nav-tabs mb-3" id="mainTabs" role="tablist">
          <li class="nav-item" role="presentation"><button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab">Overview</button></li>
          <li class="nav-item" role="presentation"><button class="nav-link" id="features-tab" data-bs-toggle="tab" data-bs-target="#features" type="button" role="tab">Features</button></li>
          <li class="nav-item" role="presentation"><button class="nav-link" id="snap-tab" data-bs-toggle="tab" data-bs-target="#snapshots" type="button" role="tab">Data Snapshots</button></li>
          <li class="nav-item" role="presentation"><button class="nav-link" id="demo-tab" data-bs-toggle="tab" data-bs-target="#demo" type="button" role="tab">Demo Plot (iframe)</button></li>
        </ul>

        <div class="tab-content">
          <!-- OVERVIEW -->
          <div class="tab-pane fade show active card-ghost p-4" id="home" role="tabpanel">
            <h4>What this project does</h4>
            <p>Provides an approachable UI for exploring proteomic experiments: upload peptide / protein tables, run preprocessing, visualize via PCA/volcano/heatmaps, cluster samples, and export results. The Shiny backend performs calculations; this landing page showcases the interface and sample outputs.</p>

            <div class="accordion" id="overviewAccordion">
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne">Why proteomics?</button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#overviewAccordion">
                  <div class="accordion-body">Proteomics measures the proteome — the expressed proteins — and provides direct insight into functional cellular states. Effective visualization helps reveal differential expression, sample outliers, and biologically meaningful clusters.</div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo">Technical notes</button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#overviewAccordion">
                  <div class="accordion-body">The suite accepts common inputs (MaxQuant, Proteome Discoverer exports, generic CSV/TSV). Normalization, imputation, and filtering are configurable in the Shiny UI. Outputs are downloadable as CSV and high-res figures.</div>
                </div>
              </div>
            </div>

          </div>

          <!-- FEATURES -->
          <div class="tab-pane fade card-ghost p-4" id="features" role="tabpanel">
            <h4 id="features">Key Features</h4>
            <ul>
              <li>Upload & preprocess proteomic tables (filtering, normalization)</li>
              <li>Interactive PCA & sample clustering</li>
              <li>Volcano plots for differential expression</li>
              <li>Heatmap generation with hierarchical clustering</li>
              <li>Export figures & data; reproducible report generation</li>
            </ul>

            <div class="row mt-3">
              <div class="col-12 col-md-6 mb-3">
                <div class="p-3 card-ghost h-100">
                  <h6>PCA viewer</h6>
                  <canvas id="pcaChart" width="400" height="260"></canvas>
                </div>
              </div>

              <div class="col-12 col-md-6 mb-3">
                <div class="p-3 card-ghost h-100">
                  <h6>Volcano plot</h6>
                  <canvas id="volcanoChart" width="400" height="260"></canvas>
                </div>
              </div>
            </div>

          </div>

          <!-- SNAPSHOTS -->
          <div class="tab-pane fade card-ghost p-4" id="snapshots" role="tabpanel">
            <h4>Example Data Snapshots</h4>
            <p class="mb-1">Below are generated example snapshots using small synthetic data — useful for demoing how the Shiny app would present results.</p>

            <div class="mb-3">
              <h6>Proteomics sample table (preview)</h6>
              <div class="table-responsive card p-3">
                <table class="table table-sm table-striped mb-0">
                  <thead><tr><th>Protein</th><th>Gene</th><th>Sample_A</th><th>Sample_B</th><th>Sample_C</th></tr></thead>
                  <tbody>
                    <tr><td>P0001</td><td>TP53</td><td>12.3</td><td>9.8</td><td>11.1</td></tr>
                    <tr><td>P0002</td><td>ACTB</td><td>25.6</td><td>24.9</td><td>26.0</td></tr>
                    <tr><td>P0003</td><td>GAPDH</td><td>18.2</td><td>17.9</td><td>18.5</td></tr>
                    <tr><td>P0004</td><td>MYH7</td><td>5.2</td><td>4.9</td><td>5.5</td></tr>
                    <tr><td>P0005</td><td>BRCA1</td><td>3.1</td><td>2.8</td><td>3.4</td></tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div>
              <h6>Heatmap (mini)</h6>
              <div class="card p-3">
                <div id="heatmap" class="heatmap-grid"></div>
                <small class="text-muted">Heatmap shows scaled expression across 12 features (synthetic).</small>
              </div>
            </div>

          </div>

          <!-- DEMO IFRAME -->
          <div class="tab-pane fade card-ghost p-4" id="demo" role="tabpanel">
            <h4 id="demo">Embedded Demo Plot</h4>
            <p class="mb-2">This iframe will load <code>plot.html</code> placed alongside this landing page. It can host an exported html from Shiny (e.g., an htmlwidgets standalone plot) or a static demo page.</p>

            <div class="iframe-wrapper mb-3">
              <iframe src="plot.html" title="Demo Plot" loading="lazy"></iframe>
            </div>

            <p class="mb-0 small text-muted">If <code>plot.html</code> is missing the iframe will show a 404. To test locally, create a <code>plot.html</code> file in the same folder.</p>

          </div>

        </div>

      </div>

      <aside class="col-lg-4">
        <div class="card card-ghost p-3 mb-3">
          <h6>Quick actions</h6>
          <p class="small">Download demo, view source, or run locally.</p>
          <div class="d-grid gap-2">
            <a id="downloadHtmlBtn" class="btn btn-outline-primary btn-sm" href="#">Download HTML</a>
            <a class="btn btn-primary btn-sm" href="#" onclick="window.print();return false;">Print</a>
          </div>
        </div>

        <div class="card p-3">
          <h6>Usage notes</h6>
          <ul class="small mb-0">
            <li>Place <code>plot.html</code> next to this file to embed interactive demos.</li>
            <li>Charts shown here are synthetic and for presentation only.</li>
            <li>Replace placeholder logo and texts with your project assets.</li>
          </ul>
        </div>
      </aside>

    </div>
  </main>

  <footer class="container">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <small>&copy; 2025 Proteomic Data Exploration Suite — Built with R &amp; Shiny</small>
      </div>
      <div>
        <small class="text-muted">Made for research demos • Mobile responsive</small>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Animation helper for tabs: add 'fade-slide-enter' to active pane to animate
    document.querySelectorAll('.nav-tabs button[data-bs-toggle="tab"]').forEach(btn=>{
      btn.addEventListener('shown.bs.tab', (e)=>{
        const selector = e.target.getAttribute('data-bs-target');
        const pane = document.querySelector(selector);
        pane.classList.add('fade-slide-enter');
        requestAnimationFrame(()=> pane.classList.add('active'));
        setTimeout(()=>{ pane.classList.remove('fade-slide-enter','active'); }, 450);
      });
    });

    // SAMPLE DATA & Chart generation for PCA & Volcano
    function randn(mu=0,s=1){ return mu + (Math.sqrt(-2*Math.log(Math.random()))*Math.cos(2*Math.PI*Math.random()))*s; }

    // PCA scatter (synthetic)
    const pcaCtx = document.getElementById('pcaChart').getContext('2d');
    const pcaData = {datasets:[{label:'Group A', data: Array.from({length:30}, ()=>({x:randn(-1,1.2), y:randn(0,1)}))},{label:'Group B', data: Array.from({length:30}, ()=>({x:randn(2,1), y:randn(1.4,1)}))}]};
    new Chart(pcaCtx, {type:'scatter', data:pcaData, options:{plugins:{legend:{position:'bottom'}}, scales:{x:{title:{display:true,text:'PC1'}}, y:{title:{display:true,text:'PC2'}}}});

    // Volcano plot synthetic
    const volcCtx = document.getElementById('volcanoChart').getContext('2d');
    const volcPoints = Array.from({length:120}, (_,i)=>{ const lfc = randn(0,1.6); const p = Math.abs(randn(0,1)); return {x: lfc, y: -Math.log10(Math.abs(Math.random())*0.1 + 0.001)}; });
    new Chart(volcCtx, {type:'scatter', data:{datasets:[{label:'Proteins', data:volcPoints}]}, options:{scales:{x:{title:{display:true,text:'log2 Fold Change'}}, y:{title:{display:true,text:'-log10 p-value'}}}, plugins:{legend:{display:false}}}});

    // Heatmap generation (12x12 synthetic)
    const heatEl = document.getElementById('heatmap');
    const n=12; for(let i=0;i<n*n;i++){
      const val = Math.random();
      const cell = document.createElement('div'); cell.className='heat-cell';
      const inner = document.createElement('span'); inner.textContent = (Math.round(val*100)/100);
      // color scale from white -> blue
      const r= 240 - Math.round(val*80);
      const g= 248 - Math.round(val*120);
      const b= 255 - Math.round(val*230);
      inner.style.background = 'transparent';
      cell.style.background = `rgb(${Math.round(15 + val*45)}, ${Math.round(80 + val*120)}, ${Math.round(130 + val*125)})`;
      cell.style.boxShadow='inset 0 0 0 1px rgba(255,255,255,0.02)';
      cell.appendChild(inner); heatEl.appendChild(cell);
    }

    // Download current HTML (serialize)
    document.getElementById('downloadHtmlBtn').addEventListener('click', ()=>{
      const html = '<!doctype html>\n' + document.documentElement.outerHTML;
      const blob = new Blob([html], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download='proteomics-landing.html'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

  </script>
</body>
</html>
